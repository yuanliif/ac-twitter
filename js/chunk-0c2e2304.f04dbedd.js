(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c2e2304"],{"43cf":function(t,e,a){},"4db2":function(t,e,a){},"56ab":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isLoadingUser?t._e():a("div",{staticClass:"followers"},[a("div",{staticClass:"followers-header"},[a("icon",{staticClass:"back-button cursor-pointer",attrs:{"icon-name":"back-arrow"},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$router.go(-1)}}}),a("div",{staticClass:"user-info"},[a("div",{staticClass:"user-name"},[t._v(" "+t._s(t.emptyName(t.user.name,t.user.account))+" ")]),a("div",{staticClass:"tweets-amount"},[t._v(" "+t._s(t.user.tweetAmount)+" 推文 ")])])],1),a("div",{staticClass:"switch-list"},[a("router-link",{staticClass:"followers",attrs:{to:{name:"followers",params:{id:t.user.id}}}},[t._v(" 跟隨者 ")]),a("router-link",{staticClass:"followings",attrs:{to:{name:"followings",params:{id:t.user.id}}}},[t._v(" 正在跟隨 ")])],1)])},s=[],n=a("2708"),r={name:"FollowerAndFollowingNav",mixins:[n["b"]],props:{user:{type:Object,required:!0,default:function(){}},isLoadingUser:{type:Boolean,required:!0,default:!0}}},i=r,l=(a("f664"),a("2877")),c=Object(l["a"])(i,o,s,!1,null,"210ddcde",null);e["a"]=c.exports},"5a4c":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoadingFollowData,expression:"!isLoadingFollowData"}]},[t.followData.length>0?a("div",t._l(t.followData,(function(e){return a("div",{key:e.id,staticClass:"follow-group"},[a("UserThumbnail",{staticClass:"follow-avatar",attrs:{"initial-user":e}}),a("div",{staticClass:"main-info"},[a("div",{staticClass:"user-container"},[a("span",{staticClass:"info"},[a("div",{staticClass:"name",attrs:{title:t.emptyName(e.name,e.account)}},[t._v(" "+t._s(t.emptyName(e.name,e.account))+" ")]),a("div",{staticClass:"account",attrs:{title:e.account}},[t._v(" "+t._s(t._f("addPrefix")(e.account))+" ")])]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.showControl,expression:"follow.showControl"}],staticClass:"control"},[a("FollowControlButton",{attrs:{"initial-user":e}})],1)]),a("div",{staticClass:"introduction"},[t._v(" "+t._s(e.introduction)+" ")])])],1)})),0):a("h1",{staticClass:"default-text"},[t._v(" "+t._s(t.defaultText)+" ")])])},s=[],n=a("2708"),r=a("3518"),i=a("d092"),l={components:{UserThumbnail:i["a"],FollowControlButton:r["a"]},mixins:[n["a"],n["b"]],props:{followData:{type:Array,required:!0,default:function(){return[]}},isLoadingFollowData:{type:Boolean,required:!0,default:!0},defaultText:{type:String,required:!0,default:""}}},c=l,u=(a("82cc"),a("2877")),d=Object(u["a"])(c,o,s,!1,null,"326144ea",null);e["a"]=d.exports},"63b0":function(t,e,a){},"768e":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[a("SiteNav"),a("section",{staticClass:"main"},[a("FollowerAndFollowingNav",{attrs:{user:t.user,"is-loading-user":t.isLoadingUser}}),a("div",{staticClass:"follow-list-container"},[a("FollowList",{attrs:{"follow-data":t.proccessedData,"is-loading-follow-data":t.isLoadingFollowData,"default-text":"尚無正在跟隨"}})],1)],1),a("RecommendedList")],1)},s=[],n=a("1da1"),r=a("5530"),i=(a("96cf"),a("d81d"),a("a9e3"),a("4de4"),a("d3b7"),a("d9e2"),a("2441")),l=a("44f5"),c=a("56ab"),u=a("5a4c"),d=a("8845"),f=a("4cce"),w=a("2fa3"),m=a("2f62"),v={components:{SiteNav:i["a"],RecommendedList:l["a"],FollowerAndFollowingNav:c["a"],FollowList:u["a"]},data:function(){return{followings:[],user:{},isLoadingUser:!0,isLoadingFollowData:!0}},beforeRouteUpdate:function(t,e,a){var o=t.params.id;this.fetchUser(o),this.fetchFollowings(o),a()},computed:Object(r["a"])(Object(r["a"])({},Object(m["b"])(["currentUser"])),{},{proccessedData:function(){var t=this.$route.params.id,e=this.$store.state.currentUser.id,a=this.followings.map((function(t){return Object(r["a"])(Object(r["a"])({},t),{},{showControl:!0})}));return a=e===Number(t)?a.filter((function(t){return t.followingId!==e})):a.map((function(t){return t.followingId===e?Object(r["a"])(Object(r["a"])({},t),{},{showControl:!1}):t})),a.map((function(t){return Object(r["a"])(Object(r["a"])({},t),{},{id:t.followingId})}))}}),watch:{"$store.state.messageQueue.follow":{handler:function(t,e){return"add"===t.action?this.followUser(t.userId):"remove"===t.action?this.unfollowUser(t.userId):void 0},deep:!0}},created:function(){var t=this.$route.params.id;this.fetchUser(t),this.fetchFollowings(t)},methods:{fetchUser:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var o,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.isLoadingUser=!0,a.next=4,f["a"].getUserData({userId:t});case 4:if(o=a.sent,s=o.data,void 0!==s.id){a.next=8;break}throw new Error(s.message);case 8:e.user=s,e.isLoadingUser=!1,a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](0),w["a"].fire({icon:"error",title:a.t0.message});case 15:case"end":return a.stop()}}),a,null,[[0,12]])})))()},fetchFollowings:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.isLoadingFollowData=!0,a.next=4,d["a"].getFollowings({userId:t});case 4:if(o=a.sent,"OK"===o.statusText){a.next=7;break}throw new Error(o.statusText);case 7:if(!1!==Array.isArray(o.data)){a.next=9;break}throw new Error(o.data.message);case 9:e.isLoadingFollowData=!1,e.followings=o.data,a.next=16;break;case 13:a.prev=13,a.t0=a["catch"](0),w["a"].fire({icon:"error",title:"目前無法取得跟隨者，請稍後再試"});case 16:case"end":return a.stop()}}),a,null,[[0,13]])})))()},followUser:function(t){this.followings=this.followings.map((function(e){return e.followingId===t?Object(r["a"])(Object(r["a"])({},e),{},{followed:!0}):e}))},unfollowUser:function(t){this.followings=this.followings.map((function(e){return e.followingId===t?Object(r["a"])(Object(r["a"])({},e),{},{followed:!1}):e}))}}},p=v,h=(a("e066"),a("2877")),g=Object(h["a"])(p,o,s,!1,null,"6ffe72ef",null);e["default"]=g.exports},"82cc":function(t,e,a){"use strict";a("4db2")},e066:function(t,e,a){"use strict";a("43cf")},f664:function(t,e,a){"use strict";a("63b0")}}]);
//# sourceMappingURL=chunk-0c2e2304.f04dbedd.js.map