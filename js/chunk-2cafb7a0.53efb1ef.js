(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cafb7a0"],{"01c8":function(t,e,r){"use strict";r("868e")},5170:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tab-container"},[r("TweetList",{attrs:{tweets:t.sortedTweets,"is-loading":t.isLoading},on:{"after-reply":function(e){return t.afterReplyHandler(e)}}})],1)},a=[],s=r("2909"),i=r("1da1"),c=(r("96cf"),r("a9e3"),r("d9e2"),r("99af"),r("d81d"),r("2fa3")),o=r("4cce"),u=r("4c78"),d={components:{TweetList:u["a"]},data:function(){return{tweets:[],isLoading:!0}},beforeRouteUpdate:function(t,e,r){var n=t.params.id;this.fetchTweets(n),r()},computed:{sortedTweets:function(){return Object(c["c"])(this.tweets,"createdAt")}},watch:{"$store.state.messageQueue.tweet":{handler:function(t,e){if(t&&void 0!==t.id){if(t.userData.id!==Number(this.$route.params.id))return;this.addTweetToList(t),this.$store.commit("consumeTweet")}}}},created:function(){var t=this.$route.params.id;this.fetchTweets(t)},methods:{fetchTweets:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,e.isLoading=!0,r.next=4,o["a"].getUserTweets({userId:t});case 4:if(n=r.sent,"OK"===n.statusText){r.next=7;break}throw new Error(n.statusText);case 7:e.tweets=n.data,e.isLoading=!1,r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](0),c["a"].fire({icon:"error",title:"無法取得推文，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})))()},addTweetToList:function(t){this.tweets=[t].concat(Object(s["a"])(this.tweets))},afterReplyHandler:function(t){this.tweets=this.tweets.map((function(e){return e.id===t&&(e.replyAmount=e.replyAmount+1),e}))}}},f=d,l=r("2877"),w=Object(l["a"])(f,n,a,!1,null,null,null);e["default"]=w.exports},6783:function(t,e,r){"use strict";r("a4d3"),r("e01a");var n=r("2fa3");e["a"]={get:function(t){var e=t.tweetId;return n["b"].get("/tweets/".concat(e))},getAll:function(){return n["b"].get("/tweets")},getReplies:function(t){var e=t.tweetId;return n["b"].get("/tweets/".concat(e,"/replies"))},post:function(t){var e=t.description;return n["b"].post("/tweets",{description:e})},postReply:function(t){var e=t.tweetId,r=t.comment;return n["b"].post("/tweets/".concat(e,"/replies"),{comment:r})},like:function(t){var e=t.tweetId;return n["b"].post("/tweets/".concat(e,"/like"))},unlike:function(t){var e=t.tweetId;return n["b"].post("/tweets/".concat(e,"/unlike"))}}},"868e":function(t,e,r){},d092:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("router-link",{staticClass:"photo-container",attrs:{to:{name:"user-main",params:{id:t.user.id}}}},[r("img",{directives:[{name:"show",rawName:"v-show",value:t.user.avatar,expression:"user.avatar"}],attrs:{src:t.user.avatar},on:{error:function(e){t.user.avatar=""}}})])},a=[],s=r("5530"),i={props:{initialUser:{type:Object,required:!0}},data:function(){return{user:{id:-1,avatar:""}}},watch:{initialUser:function(t){this.user=Object(s["a"])(Object(s["a"])({},this.user),t)}},created:function(){this.user=Object(s["a"])(Object(s["a"])({},this.user),this.initialUser)}},c=i,o=(r("01c8"),r("2877")),u=Object(o["a"])(c,n,a,!1,null,"34e062da",null);e["a"]=u.exports},fb6a:function(t,e,r){"use strict";var n=r("23e7"),a=r("da84"),s=r("e8b5"),i=r("68ee"),c=r("861d"),o=r("23cb"),u=r("07fa"),d=r("fc6a"),f=r("8418"),l=r("b622"),w=r("1dde"),p=r("f36a"),h=w("slice"),v=l("species"),m=a.Array,b=Math.max;n({target:"Array",proto:!0,forced:!h},{slice:function(t,e){var r,n,a,l=d(this),w=u(l),h=o(t,w),g=o(void 0===e?w:e,w);if(s(l)&&(r=l.constructor,i(r)&&(r===m||s(r.prototype))?r=void 0:c(r)&&(r=r[v],null===r&&(r=void 0)),r===m||void 0===r))return p(l,h,g);for(n=new(void 0===r?m:r)(b(g-h,0)),a=0;h<g;h++,a++)h in l&&f(n,a,l[h]);return n.length=a,n}})}}]);
//# sourceMappingURL=chunk-2cafb7a0.53efb1ef.js.map